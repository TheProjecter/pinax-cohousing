{% extends "profiles/base.html" %}

{% load i18n %}
{% load avatar_tags %}
{% load app_plugins %}

{% block head_title %}{% blocktrans %}Profile for {{ other_user }}{% endblocktrans %}{% endblock %}

{% block body %}
    {% comment %}
    <div class="right_panel">
        {% include "profiles/profile_right_panel.html" %}
    </div>
    {% endcomment %}

    <div class="left_panel">
        <div id="profile_avatar">
            <div>{% avatar other_user 80 %}</div>
            <a href="{% url avatar_change %}" id="avatar_replace">(replace)</a>
        </div>
		
		<p>
			<a href="{% url messages_compose %}{{ other_user }}/">Send a message to {{ other_user.get_full_name }}</a>.</p>
		</p>
		
        <h1>Profile for {{ other_user.get_full_name }}</h1>
    
        <div class="profile_info">
            {% if other_user.get_profile.name %}<p><b>{% trans "Name" %}</b>: {{ other_user.get_profile.name }}</p>{% endif %}
            {% if other_user.get_profile.about %}<p><b>{% trans "About" %}</b>: {{ other_user.get_profile.about }}</p>{% endif %}
            {% if other_user.get_profile.location%}<p><b>{% trans "Location" %}</b>: {{ other_user.get_profile.location }}</p>{% endif %}
            {% if other_user.get_profile.website %}<p><b>{% trans "Website" %}</b>: <a href="{{ other_user.get_profile.website }}">{{ other_user.get_profile.website }}</a></p>{% endif %}
        </div>
		
		{% if is_me %}
			<div class="form-toggle">
				<p><a href="" id="edit-profile-toggle">{% trans "Edit profile" %}</a></p>
				<form id="edit-profile" method="POST" action="" style="display: none;">
					<table>
						{{ profile_form }}
						<tr><td></td><td><input type="hidden" name="action" value="update" /><input type="submit" value="{% trans "update" %}"/></td></tr>
					</table>
				</form>
			</div>
		{% endif %}
    
    </div>
{% endblock %}

{% block extra_body %}
    <script type="text/javascript">
        $(document).ready(function() {
            $('#edit-profile').hide();
            $('#edit-profile-toggle').click(function() {
                $('#edit-profile').slideToggle();
                $('#edit-profile').autoscroll();
                return false;
            });
            if ($('#edit-profile ul.errorlist').length) {
                $('#edit-profile').show();
                $('#edit-profile ul.errorlist').autoscroll();
            }
        });
    </script>
{% endblock %}

